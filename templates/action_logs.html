<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>行为日志</title>
    <!-- 引入自定义样式 -->
    <link rel="stylesheet" href="/static/css/styles.css">
    <!-- 引入本地的 Bootstrap CSS -->
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
</head>
<body>
    {% include 'navbar.html' %}
    <h1>行为日志</h1>
    <!-- 删除: <ul id="actionLogs">
        <!-- 行为日志将通过API动态插入 -->
    <!-- 删除: </ul> -->
    <table id="actionLogsTable" class="table table-striped">
        <thead>
            <tr>
                <th>行为</th>
                <th>积分变化</th>
                <th>时间</th>
            </tr>
        </thead>
        <tbody>
            <!-- 行为日志将通过API动态插入 -->
        </tbody>
    </table>
    <script src="/static/js/jquery-3.5.1.min.js"></script>
    <script>
        $(document).ready(function() {
            // 请求 /get_action_logs 接口获取数据
            $.getJSON('/api/get_action_logs/', function(data) {
                console.log("获取行为日志成功", data);
                const actionLogsTableBody = document.querySelector('#actionLogsTable tbody');
                actionLogsTableBody.innerHTML = '';  // 清空现有日志
                data.forEach(log => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${log.behavior}</td>
                        <td>${log.points_change}</td>
                        <td>${log.timestamp}</td>
                    `;
                    actionLogsTableBody.appendChild(tr);
                });
            });
        });
    </script>
</body>
</html>